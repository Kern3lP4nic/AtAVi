<div class="container">
    <div class="row">

        <div class="panel panel-login col-md-6 col-md-offset-3">
            <div class="panel-heading text-center">
                <h2>AtAVi</h2>
                <h5>Login pannello amministrativo</h5>
                <hr>
            </div>

            <div class="panel-body">
                <div class="row">
                    <div class="col-lg-12">

                        <form [formGroup]="loginForm" (ngSubmit)="loginSubmit(loginForm.value)">

                            <div class="form-group">
                                <input type="text" name="username" class="form-control" placeholder="Username" [formControl]="loginForm.controls['username']">
                                <p *ngIf="loginForm.controls['username'].hasError('required') && loginForm.controls['username'].touched" class="message-error">Username non inserito</p>
                            </div>
                            <div class="form-group">
                                <input type="password" name="password" class="form-control" placeholder="Password" [formControl]="loginForm.controls['password']">
                                <p *ngIf="loginForm.controls['password'].hasError('minlength') && loginForm.controls['password'].touched" class="message-error">Controlla di aver inserito una password di almeno 8 caratteri</p>
                            </div>
                            <div class="form-group">
                                <div *ngIf="userNotFound" class="alert alert-danger">Utente non trovato</div>
                            </div>
                            <div class="form-group text-center">
                                <button type="submit" class="btn btn-login" [disabled]="!loginForm.valid">Log In</button>
                            </div>
                            <div class="form-group text-center">
                                <a href="#recoverPassword" class="forgot-password" data-toggle="modal" data-target="#loginModal">Forgot Password?</a>
                            </div>

                        </form>

                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<div id="loginModal" class="modal" role="dialog" data-backdrop="false">
    <div class="modal-dialog">

        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Inserisci la tua username per il recupero</h4>
            </div>

            <form [formGroup]="recoveryPasswordForm" (ngSubmit)="recoveryPsw(recoveryPasswordForm.value)">

                <div class="modal-body">

                    <div class="form-group" [ngClass]="{'has-error':!recoveryPasswordForm.controls['user'].valid && recoveryPasswordForm.controls['user'].touched}">
                        <input type="text" class="form-control" placeholder="User" [formControl]="recoveryPasswordForm.controls['user']" />
                        <div *ngIf="recoveryPasswordForm.controls['user'].hasError('required') && recoveryPasswordForm.controls['user'].dirty" class="alert alert-danger">Username non inserita</div>
                    </div>
                </div>

                <div class="form-group">
                    <div *ngIf="user2NotFound" class="alert alert-danger">Utente non trovato</div>
                </div>

                <div class="modal-footer">
                    <div class="form-group">
                        <button type="submit" class="btn btn-success" [disabled]="!recoveryPasswordForm.valid">Invia</button>
                        <button type="button" class="btn btn-danger" data-dismiss="modal" onclick="reset()">Annulla</button>
                    </div>
                </div>

            </form>

        </div>

    </div>
</div>
